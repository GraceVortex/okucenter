# Деплой образовательного центра на Railway через GitHub

Эта инструкция описывает процесс деплоя вашего Django-приложения на Railway с использованием GitHub для CI/CD.

## Подготовка к деплою

### 1. Инициализация Git репозитория

Если у вас еще нет Git репозитория, выполните следующие команды:

```bash
# Перейдите в директорию проекта
cd c:\Users\Dulat Orynbek\Desktop\okucenter

# Инициализируйте Git репозиторий
git init

# Добавьте все файлы в репозиторий
git add .

# Создайте первый коммит
git commit -m "Первоначальный коммит"
```

### 2. Создание репозитория на GitHub

1. Перейдите на [GitHub](https://github.com/) и войдите в свой аккаунт
2. Нажмите на "+" в правом верхнем углу и выберите "New repository"
3. Введите имя репозитория (например, "okucenter")
4. Оставьте репозиторий публичным или сделайте его приватным
5. Нажмите "Create repository"
6. Следуйте инструкциям на странице для пуша существующего репозитория:

```bash
git remote add origin https://github.com/ваш-username/okucenter.git
git branch -M main
git push -u origin main
```

## Деплой на Railway

### 1. Создание аккаунта на Railway

1. Перейдите на [Railway.app](https://railway.app/) и создайте аккаунт
2. Рекомендуется использовать GitHub для входа, так как это упростит интеграцию

### 2. Создание нового проекта на Railway

1. На главной странице Railway нажмите "New Project"
2. Выберите "Deploy from GitHub repo"
3. Если вы еще не подключили GitHub к Railway, следуйте инструкциям для подключения
4. Выберите ваш репозиторий "okucenter" из списка
5. Railway автоматически определит, что это Django-приложение

### 3. Настройка переменных окружения

1. В вашем проекте на Railway перейдите на вкладку "Variables"
2. Добавьте следующие переменные:
   - `SECRET_KEY`: Уникальный секретный ключ для Django
   - `DEBUG`: False
   - `ALLOWED_HOSTS`: .railway.app,aqylgym.com,www.aqylgym.com

### 4. Добавление базы данных PostgreSQL

1. В вашем проекте на Railway нажмите "New"
2. Выберите "Database" и затем "PostgreSQL"
3. Railway автоматически добавит переменную `DATABASE_URL` в ваш проект

### 5. Запуск миграций и создание суперпользователя

После успешного деплоя:

1. В вашем проекте на Railway перейдите на вкладку "Deployments"
2. Нажмите на последний успешный деплой
3. Перейдите на вкладку "Shell"
4. Выполните миграции:
   ```
   python manage.py migrate
   ```
5. Создайте суперпользователя:
   ```
   python manage.py createsuperuser
   ```
   Следуйте инструкциям для создания учетной записи администратора

## Обновление сайта

Процесс обновления сайта очень прост:

1. Внесите изменения в код локально
2. Закоммитьте изменения:
   ```
   git add .
   git commit -m "Описание изменений"
   ```
3. Отправьте изменения на GitHub:
   ```
   git push
   ```
4. Railway автоматически обнаружит изменения и выполнит новый деплой

## Мониторинг и управление

### Просмотр логов

1. В вашем проекте на Railway перейдите на вкладку "Deployments"
2. Выберите нужный деплой
3. Перейдите на вкладку "Logs" для просмотра логов приложения

### Доступ к базе данных

1. В вашем проекте на Railway перейдите на вкладку "Data"
2. Вы увидите информацию о вашей базе данных
3. Нажмите "Connect" для доступа к базе данных

## Настройка собственного домена (опционально)

Если у вас есть домен (например, aqylgym.com):

1. В вашем проекте на Railway перейдите на вкладку "Settings"
2. Прокрутите вниз до раздела "Domains"
3. Нажмите "Generate Domain" или "Custom Domain"
4. Следуйте инструкциям для настройки DNS

## Часто задаваемые вопросы

### Как перенести данные из существующей базы данных?

Если вам нужно перенести данные из существующей базы данных:

1. Создайте дамп данных локально:
   ```
   python manage.py dumpdata --exclude auth.permission --exclude contenttypes > data_dump.json
   ```

2. Загрузите дамп в Railway:
   - Откройте Shell в Railway
   - Скопируйте содержимое файла data_dump.json
   - Создайте файл на Railway:
     ```
     cat > data_dump.json << 'EOL'
     [вставьте содержимое файла]
     EOL
     ```
   - Загрузите данные:
     ```
     python manage.py loaddata data_dump.json
     ```

### Как обеспечить безопасность приложения?

- Убедитесь, что `DEBUG=False` в продакшн-среде
- Используйте безопасный `SECRET_KEY`
- Регулярно обновляйте зависимости
- Настройте HTTPS для вашего домена

### Как масштабировать приложение?

Railway позволяет легко масштабировать ваше приложение:

1. В вашем проекте перейдите на вкладку "Settings"
2. В разделе "Instance" вы можете настроить:
   - CPU и RAM
   - Количество экземпляров
   - Автомасштабирование
